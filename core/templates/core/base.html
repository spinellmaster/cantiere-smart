<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>{% block title %}CantiereSmart{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    :root { --yellow:#F4B000; --orange:#FF7A00; --black:#0A0A0A; --gray:#1C1C1C; }
    * { box-sizing:border-box }
    body { margin:0; background:#0A0A0A; color:#eaeaea; font-family:system-ui, Arial }
    a { color:inherit; text-decoration:none }
    .layout { display:flex; min-height:100vh }
    .sidebar { width:260px; background:#1C1C1C; border-right:1px solid #2a2a2a; padding:16px; position:sticky; top:0; height:100vh }
    .nav a { display:flex; gap:10px; align-items:center; padding:8px 12px; border-radius:10px; color:#cfcfcf }
    .nav a:hover, .nav a.active { background:#242424; color:var(--yellow) }
    .topbar { height:56px; border-bottom:1px solid #2a2a2a; background:#1C1C1Ccc; display:flex; align-items:center; justify-content:space-between; padding:0 16px; position:sticky; top:0; backdrop-filter: blur(6px); }
    .badge { background:#222; border:1px solid #333; border-radius:8px; padding:2px 8px; font-size:12px; color:#bbb }
    .btn { background:var(--yellow); color:#111; border:none; padding:8px 12px; border-radius:10px; font-weight:700; cursor:pointer }
    .btn.secondary { background:#222; color:#ddd; border:1px solid #333 }
    .card { background:#121212; border:1px solid #2a2a2a; border-radius:14px; padding:16px; }
    .kpi { background:#121212; border:1px solid #2a2a2a; border-radius:14px; padding:12px; }
    .kpi .label { font-size:11px; color:#a0a0a0; text-transform:uppercase; letter-spacing:1px }
    .kpi .value { font-size:22px; font-weight:900; color:var(--yellow) }
    .grid { display:grid; gap:16px }
    .error { background:#3b0a0a; border:1px solid #7a1d1d; color:#f3bbbb; padding:8px 12px; border-radius:10px }
    input, select, textarea { width:100%; background:#1e1e1e; border:1px solid #333; color:#e8e8e8; border-radius:10px; padding:8px; }
    label { font-size:12px; color:#a0a0a0 }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
<div class="layout">
  <aside class="sidebar">
    <div style="display:flex; gap:10px; align-items:center; margin-bottom:12px">
      <div style="width:36px;height:36px;border-radius:10px;background:var(--yellow);display:grid;place-items:center;color:#111;font-weight:900">CS</div>
      <div style="font-size:14px;color:#9a9a9a">CantiereSmart</div>
    </div>
    <div class="nav">
      <a href="/dashboard"><span class="material-icons">dashboard</span>Dashboard</a>
      <a href="/projects"><span class="material-icons">work</span>Progetti</a>
      <a href="/times"><span class="material-icons">schedule</span>Timbrature</a>
      <a href="/costs"><span class="material-icons">receipt_long</span>Spese</a>
      <a href="/fleet"><span class="material-icons">local_shipping</span>Flotta mezzi</a>
      <a href="/documents"><span class="material-icons">folder</span>Documenti HR</a>
      <a href="#"><span class="material-icons">analytics</span>Report / Export</a>
      <a href="#"><span class="material-icons">notifications</span>Notifiche</a>
      <a href="/admin/"><span class="material-icons">build</span>Admin</a>
    </div>
    <div style="margin-top:16px; font-size:12px; color:#808080">UI 1.0.0</div>
  </aside>
  <div style="flex:1; display:flex; flex-direction:column">
    <div class="topbar">
      <div class="badge">Server: <b style="color:var(--yellow)">OK</b></div>
      <div>
        {% if request.user.is_authenticated %}
          <span style="font-size:14px; margin-right:12px">{{ request.user.get_username }}{% if request.user.is_staff %} Â· <b>ADMIN</b>{% endif %}</span>
          <a class="btn secondary" href="/logout/">Logout</a>
        {% else %}
          <a class="btn secondary" href="/login/">Login</a>
        {% endif %}
      </div>
    </div>
    <main style="padding:16px">
      {% if messages %}
        <div style="display:grid; gap:8px; margin-bottom:12px">
          {% for m in messages %}<div class="card" style="border-color:#444">{{ m }}</div>{% endfor %}
        </div>
      {% endif %}
      {% block content %}{% endblock %}
    </main>
  </div>
</div>
</body>
</html>
