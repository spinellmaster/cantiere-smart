{% extends "core/base.html" %}
{% block title %}Timbrature · CantiereSmart{% endblock %}
{% block content %}
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px">
    <h2 style="margin:0">Timbrature</h2>
    <div style="display:flex; gap:8px">
      <a class="btn" href="/times/start/">Avvia nuova timbratura</a>
      <a class="btn secondary" href="/times/active/">Vedi timbratura attiva</a>
    </div>
  </div>

  {% if active %}
    <div class="card" style="margin-bottom:12px">
      <div style="font-weight:800; margin-bottom:6px">Timbratura attiva</div>
      <div>Progetto: <b>{{ active.project.name }}</b></div>
      <div>Inizio: {{ active.start_time }}</div>
      <div style="margin-top:8px">
        <a class="btn" href="/times/{{ active.id }}/">Dettaglio</a>
      </div>
    </div>
  {% endif %}

  <div class="card">
    <div style="font-weight:800; margin-bottom:8px">Le tue timbrature</div>
    {% if items %}
      <div style="display:grid; gap:8px">
        {% for ts in items %}
          <a class="card" style="padding:10px; display:block" href="/times/{{ ts.id }}/">
            <div style="display:flex; justify-content:space-between">
              <div>
                <div style="font-weight:700">{{ ts.project.name }}</div>
                <div style="font-size:12px; color:#9a9a9a">{{ ts.start_time }} → {{ ts.end_time|default:"(in corso)" }}</div>
              </div>
              <div class="badge" style="color:{% if ts.completed %}#00d084{% else %}#F4B000{% endif %}">
                {% if ts.completed %}chiusa{% else %}aperta{% endif %}
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <div style="font-size:14px; color:#9a9a9a">Nessuna timbratura ancora.</div>
    {% endif %}
  </div>
{% endblock %}
