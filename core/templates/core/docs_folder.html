{% extends "core/base.html" %}
{% block title %}{{ folder.name }} · Documenti HR{% endblock %}
{% block content %}
  <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:12px">
    <h2 style="margin:0">{{ folder.name }}</h2>
    <div><a class="btn secondary" href="/documents">Tutte le cartelle</a></div>
  </div>

  {% if subfolders %}
    <div class="card" style="margin-bottom:12px">
      <div style="font-weight:800; margin-bottom:8px">Sottocartelle</div>
      <div style="display:grid; gap:10px; grid-template-columns: repeat(3, minmax(0,1fr));">
        {% for s in subfolders %}
          <a class="card" style="padding:12px" href="/documents/folder/{{ s.id }}/">
            <div style="font-weight:800">{{ s.name }}</div>
            <div style="font-size:12px; color:#9a9a9a">{{ s.files.count }} file · {{ s.children.count }} sottocartelle</div>
          </a>
        {% endfor %}
      </div>
    </div>
  {% endif %}

  <div class="card">
    <div style="font-weight:800; margin-bottom:8px">File</div>
    {% if files %}
      <div style="display:grid; gap:8px">
        {% for f in files %}
          <a class="card" style="padding:10px; display:block" href="/documents/file/{{ f.id }}/">
            <div style="display:flex; justify-content:space-between; align-items:center">
              <div>
                <div style="font-weight:700">{{ f.title }}</div>
                <div style="font-size:12px; color:#9a9a9a">{{ f.get_category_display }} · {{ f.created_at }}</div>
              </div>
              <div>
                {% if f.requires_ack %}
                  <span class="badge" style="color:{% if f.ack_at %}#00d084{% else %}#F4B000{% endif %}">ACK</span>
                {% endif %}
                <span class="badge" style="margin-left:6px; color:{% if f.read_at %}#00d084{% else %}#F4B000{% endif %}">LETTURA</span>
              </div>
            </div>
          </a>
        {% endfor %}
      </div>
    {% else %}
      <div style="font-size:14px; color:#9a9a9a">Nessun file in questa cartella.</div>
    {% endif %}
  </div>
{% endblock %}
